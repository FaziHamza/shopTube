<div [class]="'card-content ' + (mainData['rowClass'] ? mainData['rowClass'] : 'flex flex-wrap')">
    <div class="{{!item.hideExpression   ? item.className : ''}}"
        *ngFor="let item of mainData.children ; index as i; last as isLast">
        <div [ngClass]="{'highLight': item.highLight == true}" *ngIf="!item.hideExpression">
            <span *ngIf="item['comment']">
                <span *ngIf="item['comment'].length > 0">
                    <div [ngStyle]="{'background' : item['commentBackgroundColor'] ? '#3b82f6' : ''}" class="b-comment">
                        <div (click)="toggleCommentDisplay(item)">
                            <div
                                class="w-4 h-4 rounded-full hover:cursor-pointer {{ item['comment'][0]['status'] === 'open' ? 'bg-red-500' : (item['comment'][0]['status'] === 'inProgress' ? 'bg-orange-500' : (item['comment'][0]['status'] === 'completed' ? 'bg-green-500' : 'bg-red-500')) }}">
                            </div>
                        </div>
                        <div class="comment-modal">
                            <nz-drawer [nzWrapClassName]="'comment-drawer'" nzWidth="700px" [nzClosable]="false"
                                [(nzVisible)]="item['showAllComments']" nzPlacement="right" nzTitle="Task Manager"
                                (nzOnClose)="handleCancel(item)">
                                <ng-container *nzDrawerContent>
                                    <div class="comments-chat">
                                        <div class="c-header">
                                            <div class="status-options">
                                                <div class="assign">
                                                    <label for="countries"
                                                        class="block  text-sm font-medium text-gray-900">
                                                        Assignee
                                                    </label>
                                                    <select id="countries"
                                                        class=" focus:ring-blue-500 focus:border-blue-500 block ">
                                                        <option selected>No Assignee</option>
                                                        <option>Name</option>
                                                        <option>Name</option>
                                                        <option>Name</option>
                                                        <option>Name</option>
                                                    </select>
                                                </div>
                                                <div class="assign">
                                                    <label for="countries"
                                                        class="block  text-sm font-medium text-gray-900">
                                                        Due Date
                                                    </label>
                                                    <input type="date">
                                                </div>
                                                <div class="assign">
                                                    <label for="countries"
                                                        class="block  text-sm font-medium text-gray-900">
                                                        Wave
                                                    </label>
                                                    <select id="countries" [(ngModel)]="item['comment'][0]['status']"
                                                        (ngModelChange)="statusChange(item['comment'][0]['status'], item)"
                                                        class="focus:ring-blue-500 focus:border-blue-500 block">
                                                        <option value="open">open</option>
                                                        <option value="inProgress">inProgress</option>
                                                        <option value="completed">completed</option>
                                                    </select>

                                                </div>
                                            </div>
                                            <div class="actions">
                                                <a href="">
                                                    <i class="fa-solid fa-ellipsis"></i>
                                                </a>
                                                <a href="">
                                                    <i class="fa-regular fa-xmark"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="c-body pb-2 pt-2">
                                            <div
                                                class="space-y-8 relative before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:ml-[8.75rem] md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-slate-300 before:to-transparent">
                                                <!-- Item -->
                                                <div *ngFor="let comment of item['comment']" class="relative">
                                                    <div class="md:flex items-center md:space-x-4 ">
                                                        <div
                                                            class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse">
                                                            <!-- Icon -->
                                                            <div
                                                                class="flex items-center justify-center w-10 h-10 rounded-full bg-white shadow md:order-1">
                                                                <svg class="{{ comment['status'] == 'open' ? 'fill-red-500' : (comment['status'] == 'inProgress' ? 'fill-orange-500' : (comment['status'] == 'completed' ? 'fill-green-500' : 'fill-gray-200')) }}"
                                                                    xmlns="http://www.w3.org/2000/svg" width="16"
                                                                    height="16">
                                                                    <path
                                                                        d="M8 0a8 8 0 1 0 8 8 8.009 8.009 0 0 0-8-8Zm0 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z" />
                                                                </svg>
                                                            </div>
                                                            <!-- Date -->
                                                            <time class=" text-sm md:w-28">{{comment.dateTime
                                                                | date :
                                                                "dd/MMM/yyyy"}}</time>
                                                        </div>
                                                        <!-- Title -->
                                                        <div class="text-slate-500 ml-14"><span
                                                                class="text-slate-900 font-bold">{{comment['whoCreated']}}</span>
                                                        </div>
                                                    </div>
                                                    <!-- Card -->
                                                    <div class=" text-slate-500 ml-14 md:ml-44">
                                                        {{comment.comment}}
                                                        <div
                                                            class="space-y-8 relative mt-5 before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:ml-[8.75rem] md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-slate-300 before:to-transparent">
                                                            <!-- Item #1 -->
                                                            <div class="relative">
                                                                <div class="md:flex items-center md:space-x-4 ">
                                                                    <div
                                                                        class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse">
                                                                        <!-- Icon -->
                                                                        <div
                                                                            class="flex items-center justify-center w-10 h-10 rounded-full bg-white shadow md:order-1">
                                                                            <svg class="fill-indigo-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                width="16" height="16">
                                                                                <path
                                                                                    d="M8 0a8 8 0 1 0 8 8 8.009 8.009 0 0 0-8-8Zm0 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z" />
                                                                            </svg>
                                                                        </div>
                                                                        <!-- Date -->
                                                                        <time
                                                                            class=" md:w-28">Apr
                                                                            7, 2024</time>
                                                                    </div>
                                                                    <!-- Title -->
                                                                    <div class="text-slate-500 ml-14"><span
                                                                            class="text-slate-900 font-bold">User11</span>
                                                                    </div>
                                                                </div>
                                                                <!-- Card -->
                                                                <div class=" text-slate-500 ml-14 md:ml-44">Various
                                                                    versions have evolved over the years, sometimes by
                                                                    accident,
                                                                    sometimes on purpose injected humour and the like.
                                                                </div>
                                                            </div>
                                                            <div class="relative">
                                                                <div class="md:flex items-center md:space-x-4 ">
                                                                    <div
                                                                        class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse">
                                                                        <!-- Icon -->
                                                                        <div
                                                                            class="flex items-center justify-center w-10 h-10 rounded-full bg-white shadow md:order-1">
                                                                            <svg class="fill-indigo-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                width="16" height="16">
                                                                                <path
                                                                                    d="M8 0a8 8 0 1 0 8 8 8.009 8.009 0 0 0-8-8Zm0 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z" />
                                                                            </svg>
                                                                        </div>
                                                                        <!-- Date -->
                                                                        <time
                                                                            class=" md:w-28">Apr
                                                                            7, 2024</time>
                                                                    </div>
                                                                    <!-- Title -->
                                                                    <div class="text-slate-500 ml-14"><span
                                                                            class="text-slate-900 font-bold">User</span>
                                                                    </div>
                                                                </div>
                                                                <!-- Card -->
                                                                <div class=" text-slate-500 ml-14 md:ml-44">Various
                                                                    versions have evolved over the years, sometimes by
                                                                    accident,
                                                                    sometimes on purpose injected humour and the like.
                                                                </div>
                                                            </div>
                                                            <div class="relative">
                                                                <div class="md:flex items-center md:space-x-4 ">
                                                                    <div
                                                                        class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse">
                                                                        <!-- Icon -->
                                                                        <div
                                                                            class="flex items-center justify-center w-10 h-10 rounded-full bg-white shadow md:order-1">
                                                                            <svg class="fill-indigo-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                width="16" height="16">
                                                                                <path
                                                                                    d="M8 0a8 8 0 1 0 8 8 8.009 8.009 0 0 0-8-8Zm0 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z" />
                                                                            </svg>
                                                                        </div>
                                                                        <!-- Date -->
                                                                        <time
                                                                            class=" md:w-28">Apr
                                                                            7, 2024</time>
                                                                    </div>
                                                                    <!-- Title -->
                                                                    <div class="text-slate-500 ml-14"><span
                                                                            class="text-slate-900 font-bold">User</span>
                                                                    </div>
                                                                </div>
                                                                <!-- Card -->
                                                                <div class=" text-slate-500 ml-14 md:ml-44">Various
                                                                    versions have evolved over the years, sometimes by
                                                                    accident,
                                                                    sometimes on purpose injected humour and the like.
                                                                </div>
                                                            </div>
                                                            <div class="relative">
                                                                <div class="md:flex items-center md:space-x-4">
                                                                    <div
                                                                        class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse">
                                                                        <!-- Icon -->
                                                                        <div
                                                                            class="flex items-center justify-center w-10 h-10 rounded-full bg-white shadow md:order-1">
                                                                            <svg class="fill-indigo-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                width="16" height="16">
                                                                                <path
                                                                                    d="M8 0a8 8 0 1 0 8 8 8.009 8.009 0 0 0-8-8Zm0 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z" />
                                                                            </svg>
                                                                        </div>
                                                                        <!-- Date -->
                                                                        <time
                                                                            class=" md:w-28">Apr
                                                                            7, 2024</time>
                                                                    </div>
                                                                    <!-- Title -->
                                                                    <div class="text-slate-500 ml-14"><span
                                                                            class="text-slate-900 font-bold">User</span>
                                                                    </div>
                                                                </div>
                                                                <!-- Card -->
                                                                <div class=" text-slate-500 ml-14 md:ml-44">Various
                                                                    versions have evolved over the years, sometimes by
                                                                    accident,
                                                                    sometimes on purpose injected humour and the like.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <form [formGroup]="commentForm">
                                            <div class="c-footer">
                                                <div class="comment">
                                                    <div class="input-group2">
                                                        <textarea rows="2" formControlName="comment"
                                                            placeholder="Write a Comment here..." nz-input></textarea>
                                                    </div>
                                                </div>
                                                <div class="status">
                                                    <button (click)="saveComment(item)" class="comment-save-button"
                                                        nz-button nzType="primary">Comment</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </ng-container>
                            </nz-drawer>
                        </div>
                    </div>
                </span>
            </span>
            <span [contextMenu]="oneContextMenu" *ngIf="isShowContextMenu">
                <context-menu #oneContextMenu>
                    <ng-template contextMenuItem (execute)="copyJson(item)"
                        [visible]="isShowContextMenu">Copy</ng-template>
                    <ng-template contextMenuItem (execute)="issue(item)"
                        [visible]="isShowContextMenu">Issue</ng-template>
                </context-menu>
                <st-mains [item]="item" [formlyModel]="formlyModel" [screenName]="screenName" [screenId]="screenId"
                    [isLast]='isLast' [form]="form" *ngIf="item"></st-mains>
            </span>
            <span class="tooltip-icon" *ngIf="item?.tooltipPosition ==  undefined || item?.tooltipPosition == 'top'">
                <span *ngIf="item.type != 'progressBar' && item.type != 'alert'
                    && item.type != 'switch' && item.type != 'rangeSlider' && item.type != 'editor_js' && item?.formlyType != 'input' && item.tooltip
                    && !item?.tooltipWithoutIcon || false" nz-tooltip [nzTooltipTitle]="item.tooltip">
                    <span nz-icon [nzType]="item.tooltipIcon ?  item.tooltipIcon : 'question-circle'"
                        [style.color]="item['toolTipColor']" nzTheme="outline"></span>
                </span>
            </span>
            <div>
                <st-mains [item]="item" [isLast]="isLast" [form]="form" [screenName]="screenName" [screenId]="screenId"
                    *ngIf="item && !isShowContextMenu"></st-mains>

            </div>
        </div>
    </div>
</div>