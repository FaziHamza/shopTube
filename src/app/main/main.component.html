<div [class]="'card-content ' + (mainData['rowClass'] ? mainData['rowClass'] : 'flex flex-wrap')">
    <div class="{{!item.hideExpression   ? item.className : ''}}"
        *ngFor="let item of mainData.children ; index as i; last as isLast">
        <div [ngClass]="{'highLight': item.highLight == true}" *ngIf="!item.hideExpression">
            <span *ngIf="item['comment']">
                <span *ngIf="item['comment'].length > 0">
                    <div [ngStyle]="{'background' : item['commentBackgroundColor'] ? '#3b82f6' : ''}" class="b-comment">
                        <div>
                            <ng-container *ngIf="item['commentUser'] && item['commentUser'].length > 1">
                                <nz-avatar-group>
                                    <ng-container *ngFor="let user of item['commentUser']; let i = index">
                                        <nz-avatar style="background: #3b82f6;" *ngIf="i < 2"
                                            [nzText]="typeFirstAlphabetAsIcon(user)"></nz-avatar>
                                        <!-- <nz-avatar *ngIf="i < 2" nzSrc="assets/images/user.png">{{ user
                                            }}</nz-avatar> -->
                                    </ng-container>
                                    <nz-avatar *ngIf="item['commentUser'].length > 2" style="background-color: #3b82f6"
                                        nzText="+{{ item['commentUser'].length - 2 }}"></nz-avatar>
                                </nz-avatar-group>
                            </ng-container>
                            <nz-avatar *ngIf="item['commentUser'] && item['commentUser'].length == 1"
                                nzSrc="assets/images/user.png"></nz-avatar>
                        </div>
                        <div class="user-detail">
                            <h6>{{item['comment'][0].whoCreated}}</h6>
                            <p><span>{{item['comment'][0].dateTime}}</span></p>
                            <p>
                                {{item['comment'][0].comment}}
                            </p>
                            <small (click)="toggleCommentDisplay()">{{item['comment'].length-1}} Replies</small>
                            <!-- <div class="dropdown">
                                <div class=" dropdown-toggle" type="button" id="dropdownMenuButton1"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    <small (click)="toggleCommentDisplay()">{{item['comment'].length-1}} Replies</small>
                                </div>
                                <button nz-button nz-dropdown [nzDropdownMenu]="menu123">
                                    {{item['comment'].length-1}} Replies
                                    <span nz-icon nzType="down"></span>
                                </button>
                            </div> -->

                        </div>
                        <!-- <nz-dropdown-menu #menu123="nzDropdownMenu">
                            <ul nz-menu>
                                <li nz-menu-item>
                                    <a>1st item</a>
                                </li>
                                <li nz-menu-item>
                                    <a>2nd item</a>
                                </li>
                                <li nz-menu-item>
                                    <a>3rd item</a>
                                </li>
                            </ul>
                        </nz-dropdown-menu> -->
                        <nz-modal [(nzVisible)]="showAllComments" nzTitle="Comments" (nzOnCancel)="handleCancel()">
                            <ng-container *nzModalContent>
                                <button class="mb-2" nz-button nz-dropdown [nzDropdownMenu]="menu11">
                                    ...
                                    <span nz-icon nzType="down"></span>
                                </button>
                                <nz-dropdown-menu #menu11="nzDropdownMenu">
                                    <ul nz-menu>
                                        <li nz-menu-item *ngIf="item['commentBackgroundColor']">
                                            <a (click)="read(item,false)">Mark as unread</a>
                                        </li>
                                        <li nz-menu-item *ngIf="!item['commentBackgroundColor']">
                                            <a (click)="read(item,true)">Mark as Read</a>
                                        </li>
                                        <li nz-menu-item>
                                            <a (click)="copyJson(item.id)">Copy</a>
                                        </li>
                                    </ul>
                                </nz-dropdown-menu>
                                <div *ngFor="let comment of item['comment']">
                                    <div>
                                        <span>
                                            <nz-avatar nzIcon="user" class="mr-2"></nz-avatar>
                                        </span>
                                        <!-- <nz-avatar-group>
                                            <nz-avatar style="background: #3b82f6;"
                                                [nzText]="typeFirstAlphabetAsIcon(comment['whoCreated'])"></nz-avatar>
                                        </nz-avatar-group> -->
                                        <span class="mr-2">{{comment['whoCreated']}}</span>
                                        <span>{{comment.dateTime}}</span>
                                    </div>
                                    <div class="user-comments">
                                        {{comment.comment}}
                                    </div>
                                </div>
                                <div>
                                    <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
                                        <input type="text" nz-input [(ngModel)]="newcomment" placeholder="Enter Comment" />
                                    </nz-input-group>
                                    <ng-template #suffixIconButton>
                                        <button (click)="save(item)" nz-button nzType="primary" nzSearch><span nz-icon
                                                nzType="right"></span></button>
                                    </ng-template>
                                </div>
                            </ng-container>
                        </nz-modal>
                    </div>





                    <!-- <div [ngStyle]="{'background' : item['commentBackgroundColor'] ? '#3b82f6' : ''}">
                        <a nz-dropdown [nzDropdownMenu]="menu">
                            <ng-container *ngIf="item['commentUser'] && item['commentUser'].length > 1">
                                <nz-avatar-group>
                                    <ng-container *ngFor="let user of item['commentUser']; let i = index">
                                        <nz-avatar *ngIf="i < 2" nzSrc="assets/images/user.png">{{ user }}</nz-avatar>
                                    </ng-container>
                                    <nz-avatar *ngIf="item['commentUser'].length > 2" style="background-color: #3b82f6"
                                        nzText="+{{ item['commentUser'].length - 2 }}"></nz-avatar>
                                </nz-avatar-group>
                            </ng-container>
                            <nz-avatar *ngIf="item['commentUser'] && item['commentUser'].length == 1"
                                nzSrc="assets/images/user.png"></nz-avatar>
                        </a>
                        <nz-dropdown-menu #menu="nzDropdownMenu">
                            <ul nz-menu nzSelectable>
                                <li *ngIf="!showAllComments" nz-menu-item>
                                    <div class="flex flex-wrap">
                                        <span class="mr-2"><nz-avatar nzIcon="user"></nz-avatar></span>
                                        <span class="mr-2">zubair@gmail.com</span>
                                    </div>
                                    <div class="user-comments">
                                        <div class="flex flex-wrap">
                                            <span>{{item['comment'][0].dateTime}}</span>
                                            <span>{{item['comment'][0].comment}}</span>
                                        </div>
                                    </div>
                                    <p (click)="toggleCommentDisplay()">{{item['comment'].length-1}} Replies</p>
                                </li>
                            </ul>
                        </nz-dropdown-menu>
                    </div> -->
                </span>
            </span>
            <span [contextMenu]="oneContextMenu" *ngIf="isShowContextMenu">
                <context-menu #oneContextMenu>
                    <ng-template contextMenuItem (execute)="copyJson(item)"
                        [visible]="isShowContextMenu">Copy</ng-template>
                    <ng-template contextMenuItem (execute)="comment(item)"
                        [visible]="isShowContextMenu">Comment</ng-template>
                </context-menu>
                <st-mains [item]="item" [formlyModel]="formlyModel" [screenName]="screenName" [screenId]="screenId"
                    [isLast]='isLast' [form]="form" *ngIf="item"></st-mains>
            </span>
            <span class="tooltip-icon" *ngIf="item?.tooltipPosition ==  undefined || item?.tooltipPosition == 'top'">
                <span *ngIf="item.type != 'progressBar' && item.type != 'alert'
                    && item.type != 'switch' && item.type != 'rangeSlider' && item.type != 'editor_js' && item?.formlyType != 'input' && item.tooltip
                    && !item?.tooltipWithoutIcon || false" nz-tooltip [nzTooltipTitle]="item.tooltip">
                    <span nz-icon [nzType]="item.tooltipIcon ?  item.tooltipIcon : 'question-circle'"
                        [style.color]="item['toolTipColor']" nzTheme="outline"></span>
                </span>
            </span>
            <div>
                <st-mains [item]="item" [isLast]="isLast" [form]="form" [screenName]="screenName" [screenId]="screenId"
                    *ngIf="item && !isShowContextMenu"></st-mains>

            </div>
        </div>
    </div>
</div>