<!-- <st-pagetitle title="Pages" [breadcrumbItems]="breadCrumbItems"></st-pagetitle> -->
<nz-card nzTitle="Application Builder List" [nzExtra]="extraTemplate">
    <div class="flex flex-wrap justify-between">
        <div class="pagination pb-2">
            <!-- <label>Pagination</label> -->
            <nz-select [(ngModel)]="pageSize">
                <nz-option [nzValue]='10' nzLabel="10"></nz-option>
                <nz-option [nzValue]='25' nzLabel="25"></nz-option>
                <nz-option [nzValue]='50' nzLabel="50"></nz-option>
                <nz-option [nzValue]='100' nzLabel="100"></nz-option>
            </nz-select>
        </div>
        <div class="search-box pb-2">
            <nz-input-group [nzSuffix]="suffixIconSearch">
                <input type="text" nz-input nzClear (keyup)="search($event)" placeholder="Search application..." [(ngModel)]="searchValue" />
            </nz-input-group>
        </div>
        <ng-template #suffixIconSearch>
            <span nz-icon (click)="clearModel()" [nzType]="searchIcon"></span>
        </ng-template>
    </div>

    <nz-table #filterTable [nzLoading]="loading" [nzData]="listOfDisplayData" [nzPageSize]="pageSize" nzBordered>
        <thead>
            <tr>
                <ng-container *ngFor="let column of listOfColumns">
                    <th *ngIf="column.name != 'Action'" [nzSortFn]="column.sortFn">{{column.name}}
                    </th>
                    <th nzWidth="60px" *ngIf="column.name == 'Action'" class="w-1/12">
                        {{column.name}}
                    </th>
                </ng-container>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of filterTable.data">
                <td>{{ data.name }}</td>
                <td>{{ data.companyName }}</td>
                <td>
                    <span class="text-blue-500 hover:cursor-pointer" nz-icon nzType="edit" nzTheme="outline" nzTooltipTitle="Edit" nz-tooltip (click)="[openModal(),editItem(data)]"></span>
                    <span class="text-red-500 pl-2 hover:cursor-pointer" nz-icon nzType="delete" nzTheme="outline" nzTooltipTitle="Delete" nz-tooltip nz-popconfirm nzPopconfirmTitle="Sure to delete?" (nzOnConfirm)="deleteRow(data.id)"></span>
                </td>
            </tr>
        </tbody>
    </nz-table>
</nz-card>
<ng-template #extraTemplate>
    <button nz-button nzType="primary" (click)="openModal()"><span nz-icon nzType="plus" nzTheme="outline"></span>Add
        New</button>
    <button nz-button nzType="primary" class="ml-2" (click)="downloadJson()"><span nz-icon nzType="download"
            nzTheme="outline"></span>Download Json</button>
</ng-template>
<!-- Modal -->
<nz-modal [(nzVisible)]="isVisible" nzTitle="Add Screen" [nzFooter]="modalFooter" (nzOnCancel)="handleCancel()">
    <ng-container *nzModalContent>
        <div class="flex flex-nowrap pb-1">
            <div style="width:24%">
                <label>Select Company</label>
            </div>
            <div style="width:76%">
                <nz-select nzClear [(ngModel)]="companyName" placeholder="Select here...">
                    <nz-option [nzValue]="item.name" [nzLabel]="item.name"
                        *ngFor="let item of companyBuilder"></nz-option>
                </nz-select>
            </div>
        </div>
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="modal-body">
                <formly-form [form]="form" [model]="model" [fields]="fields">
                </formly-form>
            </div>
        </form>
    </ng-container>
    <ng-template #modalFooter>
        <button nz-button nzType="primary" nzDanger (click)="handleCancel()"><span nz-icon nzType="close"
                nzTheme="outline"></span>Close</button>
        <button nz-button *ngIf="isSubmit" nzType="primary" (click)="onSubmit()"><span nz-icon nzType="database"
                nzTheme="outline"></span>Submit</button>
        <button nz-button *ngIf="!isSubmit" nzType="primary" (click)="onSubmit()"><span nz-icon nzType="redo"
                nzTheme="outline"></span>Update</button>