<form [formGroup]="multiSelectForm">
  <div class="flex flex-wrap">
    <!-- Add a button to add a new multi-select -->
    <button nz-button nzType="primary" class="!bg-green-500 hover:!bg-green-400 !border-none" (click)="addMultiSelect()"> <i
        class="fa-regular fa-plus mr-2"></i> Add</button>
  </div>
  <div formArrayName="multiSelects">
    <div *ngFor="let multiSelect of multiSelectArray.controls; let i = index" class="flex flex-wrap mt-4 border">
      <div [formGroupName]="i" class="w-full h-500">
        <div class="pb-1">
          <nz-select class="form-select" nzShowSearch nzAllowClear aria-label="Default Select Example"
            formControlName="selectControl">
            <nz-option [nzLabel]="item.title" [nzValue]="item.key" *ngFor="let item of EventsList"></nz-option>
          </nz-select>
        </div>
        <div class="pb-1">
          <nz-select class="form-select" nzShowSearch nzAllowClear aria-label="Default Select Example"
            formControlName="selectControl">
            <nz-option [nzLabel]="item.title" [nzValue]="item.key" *ngFor="let item of nodeList"></nz-option>
          </nz-select>
        </div>
        <div class="pb-2">
          <st-monaco-editor [selectedNode]="selectedNode" [screenName]="screenName" [formlyModel]="this.formlyModel"
            [applicationId]="applicationId" [nodes]="nodes" [screens]="screens" [jsonSchema]="jsonSchema"
            [screeenBuilderId]="screeenBuilderId" [formControlName]="i"
            (contentChange)="onEditorContentChange($event, i)"
            [codeEditorRuleInstance]="multiSelect.value.monacoEditorControl"></st-monaco-editor>
        </div>
        <div class="w-full flex justify-end">
          <button nzDanger nz-button nzType="primary" class="mb-2 mt-2 mr-1" (click)="removeMultiSelect(i)">
            <i class="fa-regular fa-trash"></i></button>
        </div>
      </div>

    </div>
  </div>

  <div class="flex flex-wrap mt-4">
    <div class="w-full">
      <button nz-button nzType="primary" class="my-2 btn" title="Save" (click)="saveMultiSelects()"
        ngbTooltip="Save Table"> <i class="fa-regular fa-floppy-disk mr-2"></i> Save </button>
    </div>
  </div>
</form>