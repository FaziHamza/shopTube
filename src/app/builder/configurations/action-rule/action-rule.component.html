<div class="general_faq mt-3">
  <form [formGroup]="actionForm" (ngSubmit)="SaveAction()">
    <div class="flex flex-wrap">
      <div class="w-1/4 mb-2">
        <nz-select class="form-select" formControlName="submissionType"
          aria-label="Default Select Example">
          <nz-option  nzValue="-1" nzLabel="Select" selected></nz-option>
          <nz-option  nzValue="onLoad" nzLabel="On Load" selected></nz-option>
          <nz-option  nzValue="onClick" nzLabel="On Click" selected></nz-option>
        </nz-select>
      </div>
      <div class="w-1/4">
        <nz-select class="form-select" formControlName="actionLink"
          aria-label="Default Select Example">
          <nz-option  nzValue="-1" nzLabel="Select" selected></nz-option>
          <nz-option nzValue="get" nzLabel="GET"></nz-option>
          <nz-option nzValue="post" nzLabel="POST"></nz-option>
          <nz-option nzValue="put" nzLabel="PUT"></nz-option>
          <nz-option nzValue="delete" nzLabel="DELETE"></nz-option>
        </nz-select>
      </div>
      <div class="w-1/3">
        <nz-select class="form-select" formControlName="actionType"
          aria-label="Default Select Example">
          <nz-option  nzValue="-1" nzLabel="Select" selected></nz-option>
          <nz-option nzValue="email" nzLabel="Email"></nz-option>
          <nz-option nzValue="query" nzLabel="Query"></nz-option>
          <nz-option nzValue="confirmEmail" nzLabel="Http"></nz-option>
          <nz-option nzValue="confirmEmail" nzLabel="Confirm Email"></nz-option>
        </nz-select>
      </div>
      <div class="w-1/2">
        <button  nz-button nzType="text" (click)="addActionFormGroup()" >
          <span nz-icon nzType="plus" nzTheme="outline"></span>
          Add Action
        </button>
      </div>
    </div>

    <div class="mb-3" formArrayName="Actions">
      <ng-container *ngFor="let ActionForm of ActionsForms.controls; let i = index">
        <!-- <button  nz-button nzType="primary"type="button" class="btn btn-warning btn-sm">
            Form # <span class="badge badge-dark">{{i}}</span>
          </button> -->
        <div class="row mt-1" style="border: 1px solid rgb(197 187 187); border-radius: 5px;"
          [formGroupName]="i">
          <div class="w-10/12" *ngIf="ActionsForms.value[i].type == 'email'">
            <div class=" p-1">
              <label class="form-label">Email</label>
              <input type="text" formControlName="refranceId">
              <input type="text" class="form-control" formControlName="email" />
            </div>
          </div>
          <div class="w-10/12" *ngIf="ActionsForms.value[i].type == 'query'">
            <div class=" p-1">
              <label [for]="'query' + i" class="form-label">Query</label>
              <input type="text" formControlName="refranceId" class="form-control"
                style="width: 18%;margin-bottom: 1%;">
              <textarea type="text" rows="5" class="form-control" [id]="'query' + i"
                formControlName="query"></textarea>
            </div>
          </div>
          <div class="w-10/12" *ngIf="ActionsForms.value[i].type == 'confirmEmail'">
            <div class=" p-1">
              <label [for]="'confirmEmail' + i" class="form-label">Confirm Email</label>
              <input type="text" formControlName="refranceId">
              <input type="text" class="form-control" [id]="'confirmEmail' + i"
                formControlName="confirmEmail" />
            </div>
          </div>
          <div class="w-1/6" style="margin-top: 6%;">
            <button  nz-button nzType="primary"class="btn btn-danger" nzDanger type="button" (click)="removeActionFormGroup(i)">
              <span nz-icon nzType="delete" nzTheme="outline"></span>
            </button>
            <button  nz-button nzType="primary"class="btn btn-danger ml-2" type="button"
              (click)="duplicateActionFormGroup(i,ActionsForms.value[i].type)">
              <span nz-icon nzType="copy" nzTheme="outline"></span>
            </button>
          </div>
        </div>
      </ng-container>

    </div>

    <button  nz-button nzType="primary"type="submit" class="btn btn-primary mt-2"><i class="fa fa-database mr-1"></i>
      Save</button>
  </form>
</div>

