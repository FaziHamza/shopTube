<nz-spin [nzSpinning]="loader" [nzSize]="'large'">
  <div *ngIf="loader" style="height: 100vh;"></div>
  <div *ngIf="selectedTheme && !loader" class="user-builder-layout" [dir]="this.selectedTheme?.layout" [ngClass]="{
    'boxed-menu': selectedTheme?.layoutWidth == 'boxed' &&  selectedTheme?.layout != 'horizental',
    'horizental-boxed': selectedTheme?.layoutWidth == 'boxed' &&  selectedTheme?.layout == 'horizental',
    'horizental-fluid': selectedTheme?.layoutWidth == 'fluid' &&  selectedTheme?.layout == 'horizental'
  }">
    <nz-layout class="app-layout">
      <nz-header class="head2" *ngIf="!currentHeader">
        <st-menu [selectedTheme]="selectedTheme"></st-menu>
      </nz-header>
      <st-pages class="head2" *ngIf="currentHeader" [resData]="currentHeader" [screenName]="domainData?.header?.navigation"
        [screenId]="domainData?.header?.screenBuilderId"></st-pages>
      <nz-layout class=""
        [class]="'content-container' + (selectedTheme?.layout === 'horizental' ? ' b-horizontal-menu' : '') + (selectedTheme.layout == 'rtl' ? ' rtl-layout2' : '')">
        <div *ngIf="!selectedTheme.isCollapsed" class="backdrop"></div>
        <nz-sider *ngIf="currentWebsiteLayout != 'website' || fullCurrentUrl.includes('/menu-builder')" [class]="'menu-sidebar' + (selectedTheme.layout === 'twoColumn' && selectedTheme['menuChildArrayTwoColumn'].length == 0 ? ' two-column-sider' : '')+
          (selectedTheme.sideBarSize == 'smallIconView' && (selectedTheme.layout == 'vertical' || selectedTheme.layout == 'rtl') ? ' small-icon-view-menu' : '') + (selectedTheme.layout == 'rtl' ? ' mobile-side-menu-rtl' : '')
          " nzTheme="light" nzCollapsible nzWidth="240px" nzBreakpoint="md" [(nzCollapsed)]="selectedTheme.isCollapsed"
          [nzTrigger]="null">
          <span [contextMenu]="oneContextMenu" *ngIf="isShowContextMenu ; else nonContextMenu">
            <context-menu #oneContextMenu>
              <ng-template contextMenuItem (execute)="issueReportFun()" [visible]="isShowContextMenu">Issue
                Report</ng-template>
            </context-menu>
            <div class="dynamic-menu desktop-toggle">
              <st-app-side-menu [selectedTheme]="selectedTheme" [menuItems]="menuItems" [mobileView]="false"
                (notify)="loadTabsAndButtons($event)"></st-app-side-menu>
            </div>
            <div *ngIf="!selectedTheme.isCollapsed" class="dynamic-menu mobile-toggle">
              <st-app-side-menu [selectedTheme]="selectedTheme" [menuItems]="menuItems" [mobileView]="true"
                (notify)="loadTabsAndButtons($event)"></st-app-side-menu>
            </div>
          </span>
          <ng-template #nonContextMenu>
            <div class="dynamic-menu desktop-toggle">
              <st-app-side-menu [selectedTheme]="selectedTheme" [menuItems]="menuItems" [mobileView]="false"
                (notify)="loadTabsAndButtons($event)"></st-app-side-menu>
            </div>
            <div *ngIf="!selectedTheme.isCollapsed" class="dynamic-menu mobile-toggle">
              <st-app-side-menu [selectedTheme]="selectedTheme" [menuItems]="menuItems" [mobileView]="true"
                (notify)="loadTabsAndButtons($event)"></st-app-side-menu>
            </div>
          </ng-template>
        </nz-sider>
        <nz-sider *ngIf="currentWebsiteLayout == 'website' && !fullCurrentUrl.includes('/menu-builder')" [class]="'menu-sidebar mobile-toggle' + (selectedTheme.layout === 'twoColumn' && selectedTheme['menuChildArrayTwoColumn'].length == 0 ? ' two-column-sider' : '')+
          (selectedTheme.sideBarSize == 'smallIconView' && (selectedTheme.layout == 'vertical' || selectedTheme.layout == 'rtl') ? ' small-icon-view-menu' : '') + (selectedTheme.layout == 'rtl' ? ' mobile-side-menu-rtl' : '')
          " nzTheme="light" nzCollapsible nzWidth="240px" nzBreakpoint="md" [(nzCollapsed)]="selectedTheme.isCollapsed"
          [nzTrigger]="null">
          <div *ngIf="!selectedTheme.isCollapsed" class="dynamic-menu mobile-toggle">
            <st-app-side-menu [selectedTheme]="selectedTheme" [menuItems]="menuItems" [mobileView]="true"
              (notify)="loadTabsAndButtons($event)"></st-app-side-menu>
          </div>
        </nz-sider>
        <nz-content class="relative" >
          <ng-container *ngIf="tabs.length">
            <ng-container *ngFor="let item of tabs">
              <st-layout-tabs-dropdown *ngIf="item.type == 'mainTab'" [layoutTabsDropdownData]="item"
                [theme]="selectedTheme['inPageMenu']"></st-layout-tabs-dropdown>
            </ng-container>
          </ng-container>
          <router-outlet></router-outlet>
          <div [class]="dataSharedService.checkContentForFixFooter ? (dataSharedService.checkContentForFixFooter[0].fixedFooter ? 'dynamic-footer' : '') : 'dynamic-footer'"
            *ngIf="currentFooter && !fullCurrentUrl.includes('/menu-builder')">
            <st-pages [resData]="currentFooter" [screenName]="domainData?.footer?.navigation"
              [screenId]="domainData?.footer?.screenBuilderId"></st-pages>
          </div>
        </nz-content>
      </nz-layout>
    </nz-layout>
  </div>