<nz-layout>
  <nz-header *ngIf="menuMode == 'horizontal'">
    <div class="flex">
      <img class="logo" src="assets/images/logo-dark.png">
      <div class="w-11/12">
        <app-menu (notify)="notifyEmit($event)"></app-menu>
      </div>
    </div>
  </nz-header>
  <div [ngClass]='horizontalRow'>
    <div *ngIf="menuMode == 'horizontal'" class="w-1/12"></div>
    <div [ngClass]='rowClass'>
      <div class={{menuColumn}} class="padding-left:50px ; padding-right:50px">
        <div [ngClass]="menuMode == 'inline'? 'flex flex-wrap' : ''">
          <div [ngClass]="selectedTheme.layouutPosiion == 'fixed' && menuMode == 'inline'? 'scroll' : ''"
            (mouseover)="setHovered(false,'start')" (mouseout)="setHovered(true,'start')">
            <ul nz-menu [style.background-image]="'url(' + selectedTheme.siderBarImages + ')'"
              style="background-size: cover; background-repeat: no-repeat; height: 100%; " [nzMode]='menuMode'
              [nzInlineCollapsed]="isCollapsed" [nzTheme]="theme ? 'dark' : 'light'">
              <ng-container class="flex flex-nowrap">
                <label *ngIf="menuMode == 'inline' && selectedTheme.sideBarSize == 'smallHoverView'" nz-checkbox
                  [(ngModel)]="checked"></label>
                <img *ngIf="menuMode == 'inline' && !isCollapsed" class="logo" src="assets/images/logo-dark.png">
                <img *ngIf="menuMode == 'inline' && isCollapsed" class="logo-sm" src="assets/images/logo-sm.png">
              </ng-container>

              <ng-container *ngFor="let item of menuItems">
                <ng-container>
                  <ng-container *ngIf="item.isTitle;else subMenu">
                    <span nz-icon nzType="appstore"></span>
                  </ng-container>
                  <ng-template #subMenu>
                    <ng-container *ngIf="item.subItems && item.subItems.length > 0;else menu">
                      <li nz-submenu [nzTitle]="item.label" nzIcon="appstore"
                        (mouseover)="setHovered('up', item.menuIcon)" (mouseout)="setHovered('down',item.menuIcon)"
                        (click)="loadTabsAndButtons($event,item)">
                        <ul *ngFor="let sub of item.subItems">
                          <ng-container>
                            <li nz-menu-item *ngIf="selectedTheme.layout != 'twoColumn'" [nzDanger]="true"
                              (click)="loadTabsAndButtons($event, sub)" (mouseover)="setHovered(false,'start')" (mouseout)="setHovered(true,'start')">{{sub.label}}</li>
                          </ng-container>
                        </ul>
                      </li>
                      <span nz-icon [nzType]="item.menuIcon" nzTheme="outline" *ngIf="menuMode === 'horizontal'"></span>
                    </ng-container>
                  </ng-template>
                  <ng-template #menu>
                    <li nz-menu-item nz-tooltip nzTooltipPlacement="right" (click)="loadTabsAndButtons($event,item)">
                      <span nz-icon nzType="appstore"></span>
                      <span>{{item.label}}</span>
                    </li>
                  </ng-template>
                </ng-container>
              </ng-container>
              <!-- THIS BUTTON IS USED IN HORIZENTAL WHNEN LENGTH OF MENU IS GREATER THAN 7 -->
              <ng-container *ngIf="menuMode == 'horizontal' && menuItems.length >= 7 ">
                <ng-container *ngFor="let mainMenu of newMenuArray" (click)="changeIcon()">
                  <li nz-submenu [nzTitle]="mainMenu.label" nzIcon="appstore">
                    <ul *ngFor="let item of mainMenu.subMenu">
                      <ng-container *ngIf="item.isTitle;else subMenu">
                        <span nz-icon nzType="appstore"></span>
                      </ng-container>
                      <ng-template #subMenu>
                        <ng-container *ngIf="item.subItems && item.subItems.length > 0;else menu">
                          <li nz-submenu [nzTitle]="item.label" nzIcon="appstore"
                            (click)="loadTabsAndButtons($event,item)">
                            <ul>
                              <li nz-menu-item *ngFor="let sub of item.subItems" [nzDanger]="true"
                                (click)="loadTabsAndButtons($event,sub)">{{sub.label}}</li>
                            </ul>
                          </li>
                        </ng-container>
                      </ng-template>
                      <ng-template #menu>
                        <li nz-menu-item nz-tooltip nzTooltipPlacement="right">
                          <span nz-icon nzType="appstore"></span>
                          <span (click)="loadTabsAndButtons($event,item)">{{item.label}}</span>
                        </li>
                      </ng-template>
                    </ul>
                  </li>
                  <span class="new-menu-icon" nz-icon style="flex-grow: 1 ; text-align: left" [nzType]="mainMenu.icon"
                    class="mt-4" *ngIf="menuMode === 'horizontal'"></span>
                </ng-container>
              </ng-container>
              <!--------------------------------------->
            </ul>
          </div>
          <!-- THIS IS USED IN TWO COLUMN CASE -->
          <div class="" [ngClass]="selectedTheme.layouutPosiion == 'fixed' && menuMode == 'inline'? 'scroll' : ''"
            *ngIf="selectedTheme.layout == 'twoColumn'">
            <ul nz-menu [style.background-image]="'url(' + selectedTheme.siderBarImages + ')'"
              style="background-size: cover; background-repeat: no-repeat; height: 100%; " [nzMode]='menuMode'
              [nzTheme]="theme ? 'dark' : 'light'" [nzInlineCollapsed]="isTwoColumnCollapsed">
              <img class="logo" src="assets/images/logo-dark.png">
              <ng-container *ngFor="let item of menuChildArrayTwoColumn">
                <ng-container>
                  <ng-container *ngIf="item.isTitle;else menu">
                    <span nz-icon nzType="line"></span>
                  </ng-container>
                  <ng-template #menu>
                    <li nz-menu-item nz-tooltip nzTooltipPlacement="right" (click)="loadTabsAndButtons($event,item)">
                      <span style="font-size: 5px;" nz-icon nzType="line"></span>
                      <span>{{item.label}}</span>
                    </li>
                  </ng-template>
                </ng-container>
              </ng-container>
            </ul>
          </div>
          <!--------------------------------------->
        </div>

      </div>

      <div class={{contentColumn}}>
        <nz-header *ngIf="menuMode == 'inline'">
          <div class="flex flex-nowrap">
            <div class="text-center">
              <span nz-icon *ngIf="selectedTheme.layoutWidth != 'boxed'" class="hover:cursor-pointer"
                [nzType]="isCollapsed ? 'arrow-right' : 'menu-fold' " (click)="toggleCollapsed()"></span>
            </div>
            <ng-container>
              <app-menu (notify)="notifyEmit($event)"></app-menu>
            </ng-container>
          </div>
        </nz-header>
        <nz-content>
          <ng-container *ngIf="dropdown.length">
            <app-layout-button (notify)="notifyEmitForDropdown($event)" [dropdownData]="dropdown"></app-layout-button>
          </ng-container>
          <ng-container *ngIf="tabs.length">
            <ng-container *ngFor="let item of tabs">
              <app-layout-tabs *ngIf="item.type == 'mainDashonicTabs'" [tabsData]="item"></app-layout-tabs>
            </ng-container>
          </ng-container>
          <br>
          <router-outlet></router-outlet>
        </nz-content>
        <!-- CUSTOMIZE THEME -->
        <app-layout-drawer [selectedTheme]="selectedTheme" (notify)="changeLayout($event)"></app-layout-drawer>
        <!--------------------->
      </div>
    </div>
    <div *ngIf="menuMode == 'horizontal'" class="w-1/12"></div>
  </div>


  <nz-footer class="bg-white-500 text-black-500">ShopoTube</nz-footer>
</nz-layout>