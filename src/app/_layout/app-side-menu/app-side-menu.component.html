<div>
  <div [ngClass]="selectedTheme.layout === 'twoColumn' ? 'flex flex-wrap' : ''">
    <div (mouseover)="setHovered(false,'start')" (mouseout)="setHovered(true,'start')">
      <div [ngClass]="{'flex flex-wrap': selectedTheme.menuMode === 'horizontal'}"
        [ngStyle]="{'background': selectedTheme.menuMode === 'horizontal'?'#fff' :''}"
        style="background-size: cover; background-repeat: no-repeat; height: 100%; ">
        <div *ngIf="selectedTheme.menuMode == 'horizontal'" class="w-1/12"></div>
        <div [ngClass]="{'w-4/5': selectedTheme.menuMode === 'horizontal'}">
          <ul nz-menu [ngClass]="this.selectedTheme.layout == 'rtl' ? 'rtlMenu' : ''"
            [style.background-image]="'url(' + selectedTheme.siderBarImages + ')'" [nzMode]='selectedTheme.menuMode'
            [nzInlineCollapsed]="selectedTheme.isCollapsed" [nzTheme]="selectedTheme.theme ? 'dark' : 'light'">
            <ng-container class="flex flex-nowrap">
              <label *ngIf="selectedTheme.menuMode == 'inline' && selectedTheme.sideBarSize == 'smallHoverView'"
                nz-checkbox [(ngModel)]="selectedTheme.checked"></label>
            </ng-container>
            <ng-container *ngIf="selectedTheme.sideBarSize != 'compact'">
              <ng-container *ngFor="let item of selectedTheme.allMenuItems">
                <li class="menu-title" *ngIf="item.isTitle && shouldExecute(item);"><span class="menu-item-icon">
                    <st-icon *ngIf="item.icon" [type]="item.iconType == 'outline'" [icon]="item.icon"
                      [size]="item.iconSize || 15" [color]="item.iconColor || ''"></st-icon>
                  </span><span *ngIf="!this.selectedTheme.isCollapsed">{{item.title}}</span></li>
                <ng-template #customIcon>
                  <span nz-icon nzType="step-backward" nzTheme="outline"></span>
                </ng-template>
                <ng-container *ngIf="item.children.length && shouldExecute(item.children[0]);else menu">
                  <!-- <li nz-submenu [nzTitle]="item.title" [ngTemplateOutlet]="customIcon" -->
                  <li nz-submenu (mouseover)="setHovered('up', item.menuIcon,item)"
                    (mouseout)="setHovered('down',item.menuIcon,item)" (click)="loadTabsAndButtons($event,item)">
                    <span class="child-menu">
                      <span class="menu-item-icon">
                        <st-icon *ngIf="item.icon" [type]="item.iconType || 'outline'" [icon]="item.icon"
                          [size]="item.iconSize || 15" [color]="item.iconColor || ''"></st-icon>
                      </span><span *ngIf="!this.selectedTheme.isCollapsed">{{item.title}}</span></span>
                    <ul>
                      <ng-container *ngFor="let sub of item.children">
                        <ng-container *ngIf="shouldExecute(sub) && selectedTheme.layout != 'twoColumn'">
                          <li nz-menu-item *ngIf="sub.children.length == 0" (click)="loadTabsAndButtons($event, sub)"
                            (mouseover)="setHovered(false,'start',sub)" (mouseout)="setHovered(true,'start')">
                            <span class="subchild-menu">
                              <span class="menu-item-icon">
                                <st-icon *ngIf="sub.icon" [type]="sub.iconType || 'outline'" [icon]="sub.icon"
                                  [size]="sub.iconSize || 15" [color]="sub.iconColor || ''"></st-icon>
                              </span><span *ngIf="!this.selectedTheme.isCollapsed">{{sub.title}}</span></span>
                          </li>
                          <ng-container *ngIf="sub.children.length > 0">
                            <li nz-submenu  (click)="loadTabsAndButtons($event, sub)"
                              (mouseover)="setHovered(false,'start',item)" (mouseout)="setHovered(true,'start')">
                              <span class="subchild-menu">
                                <span class="menu-item-icon">
                                  <st-icon *ngIf="sub.icon" [type]="sub.iconType || 'outline'" [icon]="sub.icon"
                                    [size]="sub.iconSize || 15" [color]="sub.iconColor || ''"></st-icon>
                                </span><span *ngIf="!this.selectedTheme.isCollapsed">{{sub | json}}</span></span>
                              <ul>
                                <li nz-menu-item *ngFor="let subSub of sub.children">
                                  <span class="subchild-menu">
                                    <span class="menu-item-icon">
                                      <st-icon *ngIf="subSub.icon" [type]="subSub.iconType == 'outline'" [icon]="subSub.icon"
                                        [size]="subSub.iconSize || 15" [color]="subSub.iconColor || ''"></st-icon>
                                    </span><span *ngIf="!this.selectedTheme.isCollapsed">{{subSub.title}}</span></span></li>
                              </ul>
                            </li>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                    </ul>
                  </li>
                </ng-container>
                <ng-template #menu>
                  <li class="nav-item" *ngIf="shouldExecute(item) && !item.isTitle" nz-menu-item nz-tooltip
                    nzTooltipPlacement="right" [nzTooltipTitle]="selectedTheme.isCollapsed ? item.title : ''"
                    (click)="loadTabsAndButtons($event,item)">
                    <span [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''" nz-icon
                      *ngIf="item.iconType == undefined" [nzType]="item.icon"
                      [nzTheme]='item.iconType || "outline"'></span>
                    <span [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''" nz-icon
                      *ngIf="item.iconType == 'outline' || item.iconType == 'fill' || item.iconType == 'twotone'"
                      [nzType]="item.icon" [nzTheme]='item.iconType'></span>
                    <i [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''"
                      *ngIf="item.iconType == 'font_awsome'" [class]="item.icon"></i>
                    <span [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''"
                      *ngIf="item.iconType == 'material'">
                      <i class="material-icons">{{item.icon}}</i>
                    </span>
                    <span class="title" [style.margin-left.px]="getStyleValue(item , selectedTheme)"
                      [style.margin-right.px]="getStyle(item , selectedTheme)">{{item.title}}</span>
                  </li>
                </ng-template>
              </ng-container>
            </ng-container>
            <ng-container *ngIf="selectedTheme.sideBarSize == 'compact' && selectedTheme.layout == 'vertical'">
              <ng-container *ngFor="let item of selectedTheme.allMenuItems">
                <ng-container>
                  <ng-container *ngIf="item.isTitle && shouldExecute(item);else subMenu">
                    <span nz-icon [nzType]="item.icon"></span>
                  </ng-container>
                  <ng-template #subMenu>
                    <ng-container
                      *ngIf="item.children && item.children.length && shouldExecute(item.children[0]);else menu">
                      <div class="box block">
                        <span nz-icon nzType="appstore" nzTheme="outline"></span>
                        <!-- <p>{{item.label}}</p> -->
                        <p class="my-4" *ngIf="shouldExecute(item)" (click)="loadTabsAndButtons($event,item)">
                          {{item.label}}</p>
                        <ul *ngFor="let sub of item.children">
                          <ng-container *ngIf="shouldExecute(sub)">
                            <li nz-submenu [nzTitle]="sub.title">
                              <ul *ngFor="let subChild of sub.children">
                                <li nz-menu-item *ngIf="shouldExecute(subChild)">{{subChild.title}}</li>
                              </ul>
                            </li>
                          </ng-container>
                        </ul>

                      </div>
                      <!-- <span nz-icon [nzType]="item.menuIcon" nzTheme="outline" *ngIf="selectedTheme.menuMode === 'horizontal' && !item.isOpen"></span> -->
                      <!-- <span nz-icon [nzType]="item.menuIcon" nzTheme="outline" *ngIf="selectedTheme.menuMode === 'horizontal'"></span> -->
                    </ng-container>
                  </ng-template>
                  <ng-template #menu>
                    <div class="box block" *ngIf="shouldExecute(item)">
                      <span nz-icon [nzType]="item.icon"></span>
                      <li nz-menu-item nz-tooltip nzTooltipPlacement="right" (click)="loadTabsAndButtons($event,item)">
                        <span>{{item.title}}</span>

                      </li>
                    </div>
                  </ng-template>
                </ng-container>
              </ng-container>
            </ng-container>
            <!-- THIS BUTTON IS USED IN HORIZENTAL WHNEN LENGTH OF MENU IS GREATER THAN 7 -->
            <ng-container *ngIf="selectedTheme.menuMode == 'horizontal' && selectedTheme.allMenuItems.length >= 7 ">
              <ng-container *ngFor="let mainMenu of selectedTheme.newMenuArray" (click)="changeIcon()">
                <li nz-submenu [nzTitle]="mainMenu.label" nzIcon="appstore">
                  <ul *ngFor="let item of mainMenu.subMenu">
                    <ng-container *ngIf="item.isTitle;else subMenu">
                      <span nz-icon nzType="appstore"></span>
                    </ng-container>
                    <ng-template #subMenu>
                      <ng-container
                        *ngIf="item.children && item.children.length && shouldExecute(item.children[0]);else menu">
                        <li nz-submenu [nzTitle]="item.title" nzIcon="appstore"
                          (click)="loadTabsAndButtons($event,item)">
                          <ul>
                            <li *ngFor="let sub of item.children" nz-submenu class="bg-transparent"
                              [nzTitle]="sub.title">
                              <ul *ngFor="let subChild of sub.children">
                                <li nz-menu-item *ngIf="shouldExecute(subChild)">{{subChild.title}}</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ng-container>
                    </ng-template>
                    <ng-template #menu>
                      <li nz-menu-item (click)="loadTabsAndButtons($event,item)" nz-tooltip nzTooltipPlacement="right">
                        <span [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''" nz-icon
                          *ngIf="item.iconType == undefined" [nzType]="item.icon"
                          [nzTheme]='item.iconType || "outline"'></span>
                        <span [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''" nz-icon
                          *ngIf="item.iconType == 'outline' || item.iconType == 'fill' || item.iconType == 'twotone'"
                          [nzType]="item.icon" [nzTheme]='item.iconType'></span>
                        <i [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''"
                          *ngIf="item.iconType == 'font_awsome'" [class]="item.icon"></i>
                        <span [style.font-size.px]="item.iconSize || 15" [style.color]="item.iconColor || ''"
                          *ngIf="item.iconType == 'material'">
                          <i class="material-icons">{{item.icon}}</i>
                        </span>
                        <span class="title"
                          [style.margin-left.px]="getStyleValue(item , selectedTheme.isCollapsed)">{{item.title}}</span>
                      </li>
                    </ng-template>
                  </ul>
                </li>
                <span class="new-menu-icon" nz-icon style="flex-grow: 1 ; text-align: left" [nzType]="mainMenu.icon"
                  class="!-ml-4" *ngIf="selectedTheme.menuMode === 'horizontal'"></span>
              </ng-container>
            </ng-container>
            <!--------------------------------------->
          </ul>
        </div>
      </div>

    </div>
    <!-- THIS IS USED IN TWO COLUMN CASE -->
    <div *ngIf="selectedTheme.layout == 'twoColumn' && selectedTheme.sideBarSize != 'compact'">
      <ul nz-menu [style.background-image]="'url(' + selectedTheme.siderBarImages + ')'"
        style="background-size: cover; background-repeat: no-repeat; height: 100%; " [nzMode]='selectedTheme.menuMode'
        [nzTheme]="selectedTheme.theme ? 'dark' : 'light'" [nzInlineCollapsed]="isTwoColumnCollapsed">
        <ng-container *ngIf="menuChildArrayTwoColumn.isTitle && shouldExecute(menuChildArrayTwoColumn);else menu">
          <span nz-icon nzType="line"></span>
        </ng-container>
        <!-- <ng-container *ngIf="menuChildArrayTwoColumn.children && menuChildArrayTwoColumn.children.length ; else menu">
          <li nz-submenu *ngIf="shouldExecute(menuChildArrayTwoColumn);" [nzTitle]="menuChildArrayTwoColumn.title" [nzIcon]="menuChildArrayTwoColumn.icon"
            (click)="loadTabsAndButtons($event,menuChildArrayTwoColumn)">
            <ul *ngFor="let sub of menuChildArrayTwoColumn.children">
              <li nz-submenu (click)="loadTabsAndButtons($event, sub)" *ngIf="shouldExecute(sub)"
                [nzTitle]="sub.title">
              </li>
            </ul>
          </li>
        </ng-container> -->
        <ng-template #menu>
          <li nz-menu-item nz-tooltip nzTooltipPlacement="right" *ngIf="shouldExecute(menuChildArrayTwoColumn)"
            (click)="loadTabsAndButtons($event,menuChildArrayTwoColumn)">
            <span style="font-size: 5px;" nz-icon nzType="line"></span>
          </li>
        </ng-template>
      </ul>
    </div>
  </div>
</div>
